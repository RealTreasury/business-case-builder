(function(wp,window){const element=wp&&wp.element?wp.element:window.React&&window.ReactDOM?{createElement:window.React.createElement,useState:window.React.useState,useContext:window.React.useContext,createContext:window.React.createContext,useEffect:window.React.useEffect,Fragment:window.React.Fragment,Children:window.React.Children,render:window.ReactDOM.render}:null;if(!element||!element.render){return}const{createElement:createElement,useState:useState,useContext:useContext,createContext:createContext,useEffect:useEffect,Fragment:Fragment,Children:Children,render:render}=element;const WizardContext=createContext();function WizardProvider({children:children}){const[isOpen,setIsOpen]=useState(false);const[currentStep,setCurrentStep]=useState(1);const handleOpen=()=>{setCurrentStep(1);setIsOpen(true)};const handleClose=()=>setIsOpen(false);window.closeBusinessCaseModal=handleClose;useEffect(()=>{if(window.location.pathname==="/rtbcb"){setCurrentStep(1);setIsOpen(true);return}const params=new URLSearchParams(window.location.search);if(params.get("rtbcb_wizard")){setCurrentStep(1);setIsOpen(true);return}const handleDocumentClick=e=>{const target=e.target.closest("#rtbcb-open-btn");if(!target){return}e.preventDefault();if(document.getElementById("rtbcbModalOverlay")){handleOpen()}else{window.location.href=target.href||window.location.href}};const closeBtn=document.getElementById("rtbcb-close-btn");document.addEventListener("click",handleDocumentClick);closeBtn&&closeBtn.addEventListener("click",handleClose);return()=>{document.removeEventListener("click",handleDocumentClick);closeBtn&&closeBtn.removeEventListener("click",handleClose)}},[]);useEffect(()=>{const overlay=document.getElementById("rtbcbModalOverlay");if(!overlay){return}if(isOpen){overlay.classList.add("active");document.body.style.overflow="hidden";if(window.businessCaseBuilder&&typeof window.businessCaseBuilder.reinitialize==="function"){window.businessCaseBuilder.reinitialize()}}else{overlay.classList.remove("active");document.body.style.overflow="";if(window.businessCaseBuilder&&typeof window.businessCaseBuilder.cancelPolling==="function"){window.businessCaseBuilder.cancelPolling()}}},[isOpen]);useEffect(()=>{const handleEsc=e=>{if(e.key==="Escape"&&isOpen){handleClose()}};document.addEventListener("keydown",handleEsc);return()=>document.removeEventListener("keydown",handleEsc)},[isOpen]);const value={currentStep:currentStep,setCurrentStep:setCurrentStep,isOpen:isOpen,open:handleOpen,close:handleClose};return createElement(WizardContext.Provider,{value:value},children)}function useWizard(){return useContext(WizardContext)}function Steps({children:children}){const{currentStep:currentStep}=useWizard();return createElement(Fragment,null,Children.map(children,(child,index)=>index+1===currentStep?child:null))}window.RTBCBWizardReact={WizardProvider:WizardProvider,useWizard:useWizard,Steps:Steps};function mountWizard(){const overlay=document.getElementById("rtbcbModalOverlay");if(!overlay||!render){return}const markup=overlay.innerHTML;render(createElement(WizardProvider,null,createElement("div",{dangerouslySetInnerHTML:{__html:markup}})),overlay);if(window.businessCaseBuilder){window.businessCaseBuilder.form=document.getElementById("rtbcbForm");window.businessCaseBuilder.overlay=document.getElementById("rtbcbModalOverlay");window.businessCaseBuilder.cacheElements();window.businessCaseBuilder.bindEvents();window.businessCaseBuilder.initializePath()}}if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",mountWizard)}else{mountWizard()}})(window.wp||{},window);