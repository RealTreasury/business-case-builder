!function(e){"use strict";e(document).ready(function(){const t=e("#rtbcb-generate-treasury-tech-overview"),r=e("#rtbcb-clear-treasury-tech-overview"),c=e("#rtbcb-treasury-tech-overview-results"),n=e("#rtbcb-treasury-tech-overview-card");t.on("click",function(){const r=[];e('input[name="rtbcb_focus_areas[]"]:checked').each(function(){r.push(e(this).val())});const o=e("#rtbcb-company-complexity").val(),a=e("#rtbcb_test_treasury_tech_overview_nonce").val();if(0===r.length)return void alert("Please select at least one focus area.");const s=performance.now(),i=rtbcbTestUtils.showLoading(t,"Generating...");n.show(),c.html("<p>Generating overview...</p>"),e.ajax({url:ajaxurl,type:"POST",data:{action:"rtbcb_test_treasury_tech_overview",focus_areas:r,complexity:o,nonce:a},success:function(r){if(r.success){const o=r.data,a=o.overview||"";rtbcbTestUtils.renderSuccess(c,a,s,{word_count:o.word_count,elapsed_time:o.elapsed,generated_at:o.generated}),e("#rtbcb-regenerate-treasury-tech-overview").on("click",function(){t.trigger("click")}),e("#rtbcb-copy-treasury-tech-overview").on("click",function(){rtbcbTestUtils.copyToClipboard(a)}),n.show()}else rtbcbTestUtils.renderError(c,r.data.message||"Failed to generate overview",function(){t.trigger("click")})},error:function(){rtbcbTestUtils.renderError(c,"Request failed. Please try again.",function(){t.trigger("click")})},complete:function(){rtbcbTestUtils.hideLoading(t,i)}})}),r.on("click",function(){e('input[name="rtbcb_focus_areas[]"]').prop("checked",!1),c.html("")})})}(jQuery);